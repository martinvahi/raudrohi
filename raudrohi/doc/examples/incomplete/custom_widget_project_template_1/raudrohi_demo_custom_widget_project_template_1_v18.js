//=========================================================================
// Author: martin.vahi@softf1.com that has an
// Estonian personal identification code of 38108050020.
// This file is in public domain.
//=========================================================================
// This code example is NOT meant to be the hello world of the 
// custom widgets. The main idea of this code is to allow one 
// to create new widgets without starting to write the common
// part of the source from scratch.
//-------------------------------------------------------------------------

// It's instantiated in the library constructor.
raudrohi.widgets.g1.customwidget_t1=function(s_html_id){
	var self_public_=this;
	try{

		// RENESSAATOR_BLOCK_START
		// RENESSAATOR_BLOCK_ID=block_1
		// RENESSAATOR_SOURCE_LANGUAGE=Ruby
		// RENESSAATOR_SOURCE_START
		// RAUDROHI_CODE_GENERATION=ENV['RAUDROHI_CODE_GENERATION']
		// require(RAUDROHI_CODE_GENERATION+"/by_file/raudrohi_js_widgets_customwidget_t1_block_1.rb")
		// RENESSAATOR_SOURCE_END
		//
		// RENESSAATOR_AUTOGENERATED_TEXT_START


		// RENESSAATOR_AUTOGENERATED_TEXT_END
		// RENESSAATOR_BLOCK_END
		//-----------------------------------------------------------------
		function create_containers(){
			try{
				if(raudrohi_settings_debug_JavaScript===true){			
				} // if
				if(!prc_.containers_html_cached_){

					var s_id_widgettype_appcontext='somewidgettype_nicewidget';
					var s_lines=""+
					"<tr>\n"+
					""+
					"<td class=\"raudrohi_visible_table_cells\" "+
					"colspan=\"1\"><div id=\""+
					s_id_widgettype_appcontext+"_div\"></div></td>\n"+
					""+
					"</tr>\n";

					var ar_class_names=["raudrohi_visible_table"]; // raudrohi_positioning_table
					prc_.containers_html_cache_=prc_.selfread.wrap_2_alignment_div(
						raudrohi.lang.cg_table_t1(""+
							s_lines,
							ar_class_names));
					prc_.containers_html_cached_=true;
				} // if
				var s_container=prc_.containers_html_cache_;
				raudrohi.base.set_innerHTML(prc_.container_id_,s_container);
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // create_containers

		//-----------------------------------------------------------------
		prc_.customizable.compulsory.render_editable=function(){
			try{
				create_containers();
				widget_nice.set_readonly(true);
				prc_.mark_elemwidget_to_be_hidden(
					widget_nice,true);
				prc_.mark_elemwidget_to_be_unhidden(
					widget_nice);
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // prc_.customizable.compulsory.render_editable


		prc_.customizable.compulsory.render_readonly=function(){
			try{
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // prc_.customizable.compulsory.render_readonly

		//-----------------------------------------------------------------
		prc_.customizable.optional.create_subwidgets=function(){
			try{
				create_widgets_autogen();
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // prc_.customizable.optional.create_subwidgets=function(){

		//-----------------------------------------------------------------
		this.get_content_2_collection_t1=function(ht){
			try{
				if(raudrohi_settings_debug_JavaScript===true){
					raudrohi.base.assert_isObject(ht,'ht',
						'fabbfc5b-e124-4938-85b5-c170a0219bd7');
				} // if
				var s_field_name_in_parent=self_public_.s_get_field_name_in_parent();
				var s_unix_time=self_public_.get_content_unix_time();
				if(s_unix_time===null){ //== <field not set>
					s_unix_time="";
				} // if
				raudrohi.wg_processing_t1.dbfcreate_s_t1(ht,
					"i_"+s_field_name_in_parent+"_unix_time",
					s_unix_time,false);
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // get_content_2_collection_t1

		this.set_content_from_collection_t1=function(ht){
			try{
				var s_field_name_in_parent=self_public_.s_get_field_name_in_parent();
				var s_key_subfield_set="dbf_sb_i_"+
				s_field_name_in_parent+"_nicevalue_set";
				var s_key_field="dbf_i_"+
				s_field_name_in_parent+"_unix_time";

				if(raudrohi_settings_debug_JavaScript===true){
					raudrohi.base.assert_isObject(ht,'ht',
						'2dc1805e-849c-4c95-a2b5-c170a0219bd7');
					if(ht.containsKey(s_key_subfield_set)!==true){
						raudrohi.tmg('11714752-5db5-4035-b7a5-c170a0219bd7',
							'The ht does not contain the key "'+
							s_key_subfield_set+'".');
					} // if
					if(ht.containsKey(s_key_field)!==true){
						raudrohi.tmg('247e53c5-7313-4891-a1a5-c170a0219bd7',
							'The ht does not contain the key "'+
							s_key_field+'".');
					} // if
				} // if
				if(ht.get(s_key_subfield_set)==='f'){
					self_public_.clear_content();
					return;
				} // if
				var s_unix_time=ht.get(s_key_field);
				self_public_.set_content_by_something(s_unix_time);
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // set_content_from_collection_t1

		//-----------------------------------------------------------------
		prc_.customizable.optional.startup_hook = function() {
			try{
			// This function can be deleted from here, because
			// it is already defined in the pile of methods.
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // prc_.customizable.optional.startup_hook

		prc_.customizable.optional.shutdown_hook = function() {
			try{
			// This function can be deleted from here, because
			// it is already defined in the pile of methods.
			} catch (err){
				raudrohi.tmg('TO_BE_RE-PLAC-ED_W-ITH_-A_GUID______',err);
			} // catch
		} // prc_.customizable.optional.shutdown_hook

		self_public_.startup_sequence_init();
	} catch (err){
		raudrohi.tmg('5b32745f-eab9-4bd5-b4c8-d24380b0abd7',err);
	} // catch
} // raudrohi.widgets.g1.customwidget_t1

//-------------------------------------------------------------------------
